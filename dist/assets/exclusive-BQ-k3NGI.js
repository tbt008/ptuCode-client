import{_ as u,r as h,o as i,f as g,w as p,c as d,b as f,d as _,t as c,F as x}from"./index-DdujhLSS.js";const w={data(){return{wordIndex:-1,songWord:"",LRCData:[]}},methods:{parseLRC(e){let s=e.split(`
`),o=[];s.forEach(t=>{let r=t.split("]"),a=r[0].slice(1).trim(),n={time:this.parseTime(a),word:r[1]==""?"":r[1]};o.push(n)}),this.LRCData=o},parseTime(e){let s=e.split(":");return Number(s[0])*60+Number(s[1])},findSongWordIndex(){let e=[];e=JSON.parse(JSON.stringify(this.LRCData));let o=document.getElementById("ado").currentTime;for(let t=0;t<=e.length-1;t++)if(o<e[t].time){this.wordIndex=t-1,console.log(this.wordIndex);break}}},mounted(){if(this.songWord=localStorage.getItem("songWord"),this.songWord!="懒得下载歌词"){this.parseLRC(this.songWord);const e=document.getElementById("ado"),s=document.getElementById("songWord-main");let o=[];o=JSON.parse(JSON.stringify(this.LRCData));let t=0;e.ontimeupdate=()=>{let r=-1;this.wordIndex==-1&&(t=0);let a=e.currentTime;for(let n=0;n<=o.length-1;n++)if(a<o[n].time){r=n-1;break}r!=this.wordIndex&&(this.wordIndex=r),t=this.wordIndex*document.querySelector(".word").clientHeight,s.style.transform=`translateY(-${t}px)`}}}},y={ref:"main",id:"songWord-main",class:"songWord-main"},I={key:1,class:"word"},C={key:1};function L(e,s,o,t,r,a){const n=h("el-scrollbar");return r.songWord!="懒得下载歌词"?(i(),g(n,{key:0,height:"500px"},{default:p(()=>[f("div",y,[(i(!0),d(x,null,_(r.LRCData,(l,m)=>(i(),d("div",{key:l.time},[m===r.wordIndex?(i(),d("div",{key:0,ref_for:!0,ref:"word",class:"songWordSelect"},c(l.word),513)):(i(),d("div",I,c(l.word),1))]))),128))],512)]),_:1})):(i(),d("h1",C,"博主找不到歌词捏"))}const k=u(w,[["render",L]]);export{k as default};
